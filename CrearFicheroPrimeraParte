/*
 Ejercicio: Registro de productos con precios
Objetivo:
Crear un programa que permita registrar productos con su precio y guardarlos 
en un archivo llamado productos.txt. Luego, otro programa podrá leer ese archivo y 
mostrar los productos con el total acumulado.
✅ Requisitos:
Pedir al usuario: nombre del producto y precio.
Guardar los datos en el formato:
Producto: Pan, Precio: 1.20
Permitir agregar varios productos hasta que el usuario escriba "fin" como nombre.
Usar BufferedWriter para guardar, y BufferedReader para leer y mostrar con total final.
 */
package com.mycompany.practicasjava04.Registrodeproductosconprecios;

import java.io.BufferedWriter;
import java.io.FileWriter;
import java.util.Scanner;

public class guardarProductos {

    public static void main(String[] args) {

        String nombreProducto;
        double precio;

        Scanner sc = new Scanner(System.in);

        // Parte 1: Guardar productos
        try (BufferedWriter escribir = new BufferedWriter(new FileWriter("productos.txt", true))) {
            while (true) {

                System.out.println("Ingrese el nombre del producto o fin para salir");
                nombreProducto = sc.nextLine();
                if (nombreProducto.equalsIgnoreCase("fin")) {
                    break;
                }
                System.out.println("Precio: ");
                if (sc.hasNextDouble()) {
                    precio = sc.nextDouble();
                    sc.nextLine();
                } else {
                    System.out.println("El precio ingresado no es válido");
                    continue;
                }
                 
                // Añadir datos al fichero.
                escribir.write("Producto : " + nombreProducto + "  precio : " + " " + precio);
                // Salto de línea.
                escribir.newLine();
                System.out.println("Has guardado el producto con éxito");

            }

        } catch (Exception e) {
            System.out.println("Error de lectura en el fichero: " + e.getMessage());
        }
        sc.close();

    }

}
